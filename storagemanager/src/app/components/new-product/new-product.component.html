<div class="container">


  <form #partForm="ngForm" (submit)="onSubmitProductForm()">
    <div class="text-center  mx-auto">
      <div class="name-box">
        <h2 class="text-center">
          Gyártmány Létrehozása
        </h2>
        <div class="description">
          <div class="row">
            <div class="col-12">
              <div class="form-group">
                <label
                  for="productName">
                  Név
                </label>
                <input
                  id="productName"
                  type="text"
                  class="form-control"
                  [(ngModel)]="product.name"
                  #nameField="ngModel"
                  name="name"
                  required
                >
              </div>
            </div>
          </div>
          <div class="row">
            <div class="col-12 col-md-6">
              <h3>
                Alkatrészek hozzáadása
              </h3>
              <div class="row align-items-center">
                <div class="col-4">
                  <div class="form-group">
                    <label for="partId">
                      Alkatrész
                    </label>
                    <input
                      list="partList"
                      type="text"
                      name="partId"
                      id="partId"
                      #partField="ngModel"
                      class="form-control col-12"
                      [(ngModel)]="this.partSelector"
                      required
                    >
                    <datalist id="partList">
                      <select>
                        <option [ngValue]="part.id" *ngFor="let part of parts"
                                [value]="part.id"> {{part.name}}
                        </option>
                      </select>
                    </datalist>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-group">
                    <label for="amount">
                      Összeg
                    </label>
                    <input
                      #amountField="ngModel"
                      id="amount"
                      name="amount"
                      type="number"
                      class="form-control"
                      [min]="1"
                      [(ngModel)]="this.amountSelector"
                    >
                  </div>
                </div>
                <div class="col-4">
                  <button class="btn btn-secondary"
                          type="button"
                          (click)="onNewPart()">
                    Új Alkatrész
                  </button>
                </div>
              </div>
              <h3 class="mb-4 mt-2">
                Kiválaszott Alkatrészek:
              </h3>
              <div class="row" *ngIf="this.selectedParts">
                <div class="col-12 mb-3" *ngFor="let part of selectedParts; let i = index">
                  <div class="card text-left  p-3">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h4>Raktári szám: {{part?.id}}</h4>
                        <span>Mennyiség: {{part.amount}}</span>
                      </div>
                      <div>
                        <button class="btn btn-danger" (click)="onDeletePart(i)">
                          Törlés
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <h3>
                Gyártmány hozzáadása
              </h3>
              <div class="row align-items-center">
                <div class="col-4">
                  <div class="form-group">
                    <label for="partId">
                      Gyártmány
                    </label>
                    <input
                      list="productPartList"
                      type="text"
                      name="productPartId"
                      id="productPartId"
                      #productPartField="ngModel"
                      class="form-control col-12"
                      [(ngModel)]="this.productPartSelector"
                      required
                    >
                    <datalist id="productPartList">
                      <select>
                        <option [ngValue]="product.id" *ngFor="let product of productParts"
                                [value]="product.id"> {{product.name}}
                        </option>
                      </select>
                    </datalist>
                  </div>
                </div>
                <div class="col-4">
                  <div class="form-group">
                    <label for="productAmount">
                      Összeg
                    </label>
                    <input
                      #productAmountField="ngModel"
                      id="productAmount"
                      name="productAmount"
                      type="number"
                      class="form-control"
                      [min]="1"
                      [(ngModel)]="this.productAmountSelector"
                    >
                  </div>
                </div>
                <div class="col-4">
                  <button class="btn btn-secondary"
                          type="button"
                          (click)="onNewProductPart()">
                    Új Gyártmány
                  </button>
                </div>
              </div>
              <h3 class="mb-4 mt-2">
                Kiválaszott Gyártmányok:
              </h3>
              <div class="row" *ngIf="this.selectedProductParts">
                <div class="col-12 mb-3" *ngFor="let product of selectedProductParts; let i = index">
                  <div class="card text-left  p-3">
                    <div class="d-flex justify-content-between">
                      <div>
                        <h4>Raktári szám: {{product?.id}}</h4>
                        <span>Mennyiség: {{product.amount}}</span>
                      </div>
                      <div>
                        <button class="btn btn-danger" (click)="onDeleteProductPart(i)">
                          Törlés
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12 text-center">

          <button
            type="submit"
            class="btn btn-primary"
          >
            Termék mentése
          </button>
        </div>
      </div>
    </div>
  </form>
</div>
